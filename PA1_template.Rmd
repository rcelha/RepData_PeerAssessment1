# Reproducible Research: Peer Assessment 1


## Loading and preprocessing the data

_The data is already in the repos (activity.zip)_

* Unzip the file
* Read the csv
* Transform the date column
* Transform the interval into printable time

```{r echo=TRUE, cache=TRUE}

unzip("activity.zip", c("activity.csv"))
activity <- read.csv("activity.csv")
activity$date <- as.Date(activity$date)

# Transform the interval format into a printable time (ie. 155 into "01:55")
interval2time <- function(interval) {
    h = as.integer(interval / 100)
    h = sprintf("%02d", h)
    m = (interval %% 100)
    m = sprintf("%02d", m)
    paste(h, m, sep=":")
}

activity$time <- interval2time(activity$interval)

# let's see what's inside:
summary(activity)

```


## What is mean total number of steps taken per day?

Here's some exploration of the data. A Histogram of a total number of steps of each day. At the end, the mean and median of total number of steps per day

```{r echo=TRUE, cache=TRUE}
library(ggplot2)

# calculate the number steps by day
steps_a_day <- aggregate(activity$steps,
                         by=list(activity$date),
                         FUN=sum)

# change the names
names(steps_a_day) <- c("date", "steps")

# histogram of steps/day
chart <- ggplot(steps_a_day) +
    aes(date, steps) +
    geom_histogram(stat="identity")

print(chart)


# getting  mean and median values
steps_mean <- mean(steps_a_day$steps, na.rm=T)
steps_median <- median(steps_a_day$steps, na.rm=T)

# Mean total number of steps per day
print(steps_mean)

# Median total number of steps per day
print(steps_median)

```

## What is the average daily activity pattern?
```{r echo=TRUE, cache=TRUE}

# calculate the number steps by day
steps_interval <- aggregate(list(steps=activity$steps),
                            by=list(interval=activity$interval,
                                    time=activity$time),
                            FUN=mean, na.rm=T)

print(head(steps_interval))

chart <- ggplot(steps_interval) +
    aes(interval, steps) +
    geom_line()
    # scale_x_discrete(labels=time) + 
    # theme(axis.text.x = element_text(angle = 90, hjust = 1))

print(chart)

# Getting the interval with most steps
max_steps <- max(steps_interval$steps)
max_steps <- steps_interval[max_steps == steps_interval$steps, ]

# Interval with max avg steps
max_steps$time

# Number of steps in this interval
max_steps$steps
```



## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?
